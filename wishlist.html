<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Your Wishlist ‚Äî Demo Store</title>
<script src="auth.js"></script>
<script src="protect.js"></script>
<script src="secure-core.js"></script>
  
<style>
:root {
  --accent: #2563eb;
  --muted: #6b7280;
  --bg: #f7f7fb;
  --radius: 14px;
  --card-shadow: 0 6px 20px rgba(0,0,0,0.06);
}
body {
  font-family: "Inter", system-ui, sans-serif;
  margin: 0;
  background: var(--bg);
  color: #111;
  padding: 20px;
  overflow-x: hidden;
}
h1 { margin-bottom: 10px; }
.container {
  max-width: 1200px;
  margin: auto;
  background: white;
  border-radius: var(--radius);
  box-shadow: var(--card-shadow);
  padding: 20px;
  animation: fadeIn 0.6s ease;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.wishlist-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 18px;
  margin-top: 18px;
}
.wishlist-item {
  background: white;
  border-radius: var(--radius);
  box-shadow: var(--card-shadow);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transition: all 0.3s ease;
  transform: translateY(0);
}
.wishlist-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 28px rgba(0,0,0,0.1);
}
.wishlist-item img {
  width: 100%;
  height: 230px;
  object-fit: cover;
}
.wishlist-content {
  padding: 16px;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.wishlist-content h3 {
  margin: 0 0 8px;
  font-size: 17px;
}
.wishlist-content p {
  margin: 0 0 10px;
  color: var(--muted);
  font-size: 14px;
}
.price {
  font-weight: 600;
  color: #111;
  margin-bottom: 10px;
}
.specs {
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
}
.specs select {
  padding: 6px;
  border-radius: 8px;
  border: 1px solid #ccc;
}
.actions {
  display: flex;
  justify-content: space-between;
  gap: 8px;
}
.btn {
  flex: 1;
  border: none;
  border-radius: 8px;
  padding: 8px 10px;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.3s ease, transform 0.3s ease;
}
.btn-add {
  background: var(--accent);
  color: white;
}
.btn-add:hover {
  background: #1e40af;
  transform: translateY(-2px);
}
.btn-buy {
  background: #10b981;
  color: white;
}
.btn-buy:hover {
  background: #059669;
  transform: translateY(-2px);
}
.btn-remove {
  background: #ef4444;
  color: white;
}
.btn-remove:hover {
  background: #b91c1c;
  transform: translateY(-2px);
}
.summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #eef2ff;
  border-radius: var(--radius);
  padding: 18px 20px;
  margin-top: 30px;
  box-shadow: 0 4px 14px rgba(0,0,0,0.05);
}
.summary strong { font-size: 18px; }
.muted { color: var(--muted); font-size: 14px; }
.empty {
  text-align: center;
  padding: 80px 20px;
  color: var(--muted);
  font-size: 18px;
}
.fade {
  animation: fadeIn 0.6s ease;
}
</style>
</head>
<body>

<div class="container">
  <h1>Your Wishlist ‚ù§Ô∏è</h1>
  <p class="muted">Save items you love! Add them to cart anytime or remove them.</p>

  <div id="wishlistContainer" class="wishlist-grid"></div>

  <div class="summary" id="wishlistSummary">
    <strong>Total Items: <span id="wishlistCount">0</span></strong>
    <button id="goToCart" class="btn btn-add" style="flex:0 0 auto;">View Cart ‚Üí</button>
  </div>
</div>

<script>
// Wishlist Logic
const $ = s => document.querySelector(s);
let wishlist = JSON.parse(localStorage.getItem('ss_wishlist') || '[]');
let cart = JSON.parse(localStorage.getItem('ss_cart') || '[]');

function fmt(n) {
  return '$' + Number(n || 0).toFixed(2);
}

function saveWishlist() {
  localStorage.setItem('ss_wishlist', JSON.stringify(wishlist));
}

function saveCart() {
  localStorage.setItem('ss_cart', JSON.stringify(cart));
}

function renderWishlist() {
  const container = $('#wishlistContainer');
  if (!wishlist.length) {
    container.innerHTML = `<div class="empty fade">üíî Your wishlist is empty.<br><br>
      Browse our products and add what you love!</div>`;
    $('#wishlistSummary').style.display = 'none';
    return;
  }

  $('#wishlistSummary').style.display = 'flex';
  $('#wishlistCount').textContent = wishlist.length;

  container.innerHTML = wishlist.map((item, i) => `
    <div class="wishlist-item fade" data-idx="${i}">
      <img src="${item.image || 'https://via.placeholder.com/300x200?text=Product'}" alt="${item.title}" />
      <div class="wishlist-content">
        <div>
          <h3>${item.title}</h3>
          <p>${item.description || 'No description available.'}</p>
          <div class="price">${fmt(item.price)}</div>

          <div class="specs">
            <label>Color:
              <select data-spec="color" data-idx="${i}">
                ${(item.colors || ['Red','Blue','Black']).map(c => `<option ${item.color===c?'selected':''}>${c}</option>`).join('')}
              </select>
            </label>
            <label>Size:
              <select data-spec="size" data-idx="${i}">
                ${(item.sizes || ['S','M','L']).map(s => `<option ${item.size===s?'selected':''}>${s}</option>`).join('')}
              </select>
            </label>
          </div>
        </div>

        <div class="actions">
          <button class="btn btn-add" data-add="${i}">Add to Cart</button>
          <button class="btn btn-buy" data-buy="${i}">Buy Now</button>
          <button class="btn btn-remove" data-remove="${i}">Remove</button>
        </div>
      </div>
    </div>
  `).join('');

  attachEvents();
}

function attachEvents() {
  document.querySelectorAll('[data-add]').forEach(btn => {
    btn.addEventListener('click', e => {
      const idx = +btn.getAttribute('data-add');
      const product = wishlist[idx];
      cart.push({ ...product, quantity: 1 });
      saveCart();
      alert(`${product.title} added to cart.`);
    });
  });

  document.querySelectorAll('[data-buy]').forEach(btn => {
    btn.addEventListener('click', e => {
      const idx = +btn.getAttribute('data-buy');
      const product = wishlist[idx];
      window.location.href = 'index.html#' + encodeURIComponent(product.title);
    });
  });

  document.querySelectorAll('[data-remove]').forEach(btn => {
    btn.addEventListener('click', e => {
      const idx = +btn.getAttribute('data-remove');
      wishlist.splice(idx, 1);
      saveWishlist();
      renderWishlist();
    });
  });

  document.querySelectorAll('[data-spec]').forEach(sel => {
    sel.addEventListener('change', e => {
      const idx = +sel.getAttribute('data-idx');
      const spec = sel.getAttribute('data-spec');
      wishlist[idx][spec] = sel.value;
      saveWishlist();
    });
  });
}

$('#goToCart').addEventListener('click', () => {
  window.location.href = 'cart.html';
});

// Initialize
renderWishlist();
</script>
 <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCglKXoDTnD7X0iRM-wskCUnxyFXJCIyCM",
    authDomain: "my-ecommerce-auth-2b86d.firebaseapp.com",
    projectId: "my-ecommerce-auth-2b86d",
    appId: "1:747882612530:web:940467d8823cd576cab92b"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  onAuthStateChanged(auth, (user) => {
    if (!user) {
      window.location.href = "authentication.html";
    }
  });
</script>
</body>
  </html>
